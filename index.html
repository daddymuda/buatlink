<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html lang='ms' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/2005/gml/b' xmlns:data='http://www.google.com/2005/gml/data' xmlns:expr='http://www.google.com/2005/gml/expr'>
<head>
    <meta charset='UTF-8'/>
    <meta content='width=device-width, initial-scale=1.0' name='viewport'/>
    <title>Buat Link WhatsApp</title>
  <meta content='Cara buat link WhatsApp online dengan mudah.' name='description'/>
    <link href='https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css' rel='stylesheet'/>
  
    <style>
        body {
            background-color: #121212;
            color: #e4e6eb;
            font-family: &#39;Segoe UI&#39;, Tahoma, Geneva, Verdana, sans-serif;
            margin: 0; /* Remove default margin */
            padding: 0; /* Remove default padding */
        }

        .container {
            background-color: #1e1e1e;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 15px;
            max-width: 500px;
            margin: 0 auto; /* Center the container horizontally */
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
        }

        .btn-primary {
            background-color: #25d366;
            border-color: #25d366;
        }

        .btn-primary:hover {
            background-color: #128c7e;
            border-color: #128c7e;
        }

        .form-control {
            border-radius: 0; /* Remove rounded corners */
            background-color: #333;
            color: #e4e6eb;
            border: none;
        }

        .input-group-text {
            background-color: #25d366;
            color: #fff;
            border: none;
        }

        #whatsappLink {
            border-radius: 0; /* Remove rounded corners */
            background-color: #333;
            color: #e4e6eb;
            border: none;
        }

        .copy-feedback {
            display: none;
            color: #25d366;
        }

        @keyframes fadeOut {
            0% { opacity: 1; }
            100% { opacity: 0; }
        }

        .fade-out {
            animation: fadeOut 2s ease-in-out forwards;
        }
        .clickable-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0px;
            text-decoration: none;
            color: inherit;
        }
        .image img {
            width: 300px; /* Set image size to 200px */
            max-width: 100%;
        }
        .text {
            max-width: 490px;
            font-family: &#39;Arial&#39;, sans-serif;
            text-align: center;
            color: white;
        }
        .text h1, .text p {
            font-size: 18px;
            margin: 0; /* Remove margin to close the gap */
        }
        .text .highlight {
            font-size: 18px;
            color: #EE4D2D;
        }
    </style>
</head>
<body>

<div class='container'>
    <div class='form-group'>
        <label for='phoneNumber'>Nombor WhatsApp üëáüèª</label>
        <div class='input-group'>
            <div class='input-group-prepend'>
                <span class='input-group-text' id='countryCode'/>
            </div>
            <input class='form-control' id='phoneNumber' placeholder='0123456789' type='text'/>
        </div>
    </div>
    <div class='form-group'>
        <label for='message'>Mesej (tak wajib) üëáüèª</label>
        <input class='form-control' id='message' placeholder='hai nak save' type='text'/>
    </div>
    <button class='btn btn-primary btn-block' onclick='generateWhatsAppLink()' type='button'>Buat Link WhatsApp </button>

    <div class='mt-3'>
        <p>Link Anda üëáüèª</p>
        <div class='input-group'>
            <input class='form-control' id='whatsappLink' placeholder='link siap di sini' readonly='' type='text'/>
        </div>
        <button class='btn btn-primary btn-block mt-2' onclick='copyToClipboard()' type='button'>Salin Link</button>
        <div class='copy-feedback mt-2' id='copyFeedback'>Link disalin ke papan klip!</div>
    </div>
<a class='clickable-container' href='https://s.shopee.com.my/VkuLPYQFS' rel='noopener' target='_blank'>
            <div class='image'><br/>
                <img alt='Barang Motor Ori' src='https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiKYIw4YrAYSa5GXmJuDFJBemGDku_h7t5PK1V2HWfliaOphv5WwvKc9bbgfqzH2iCkYQUaErw43pz3D7ubS7c4KPn1-eoMbZMQJLcPEJ91De0QXVb-yMNpvkVdOads5_nrL6hCy8ZtX75WSNMcU9AwFzjdnjeviU3UU1X6Vst8Uz8RC2YcvUPitV9iDdUm/s300/100%25%20(2).gif'/>
            </div>
            <div class='text'>
              <h1>üëÜüèª Kedai barang motor ori dan murah! üëÜüèª</h1>
              <p>Tekan sini kalau nak beli</p>
              <p class='highlight'>&#9733;&#9733;&#9733;&#9733;&#9733;</p>
                                
            </div>
        </a>
</div>

<script type="text/javascript">
    async function getCountryCode() {
        try {
            const response = await fetch(&#39;https://ipapi.co/json/&#39;);
            if (!response.ok) {
                throw new Error(&#39;Respons rangkaian tidak ok&#39;);
            }
            const data = await response.json();
            const countryCode = data.country_calling_code;
            const countryFlag = getCountryFlag(data.country_code);
            document.getElementById(&#39;countryCode&#39;).innerHTML = `${countryFlag} ${countryCode}`;
        } catch (error) {
            console.error(&#39;Ralat mendapatkan kod negara:&#39;, error);
            document.getElementById(&#39;countryCode&#39;).innerHTML = &#39;N/A&#39;;
        }
    }

    function getCountryFlag(countryCode) {
        const codePoints = countryCode.toUpperCase().split(&#39;&#39;).map(char =&gt; 127397 + char.charCodeAt(0));
        return String.fromCodePoint(...codePoints);
    }

    getCountryCode();

    function generateWhatsAppLink() {
        let phoneNumber = document.getElementById(&#39;phoneNumber&#39;).value.trim();
        const message = document.getElementById(&#39;message&#39;).value.trim();
        const countryCodeElement = document.getElementById(&#39;countryCode&#39;);

        if (!phoneNumber) {
            alert(&quot;Sila masukkan nombor telefon.&quot;);
            return;
        }

        if (countryCodeElement.innerHTML === &#39;N/A&#39;) {
            alert(&quot;Kod negara tidak dapat diperoleh.&quot;);
            return;
        }

        // Extract the country code from the countryCode element
        const countryCode = countryCodeElement.innerText.split(&#39; &#39;)[1]; // Split by space and take the second part

        // Remove any non-numeric characters from the phone number
        phoneNumber = phoneNumber.replace(/\D/g, &#39;&#39;);

        // Remove leading zero if it exists
        if (phoneNumber.startsWith(&#39;0&#39;)) {
            phoneNumber = phoneNumber.substring(1);
        }

        // Encode the message and replace %20 with +
        const encodedMessage = encodeURIComponent(message).replace(/%20/g, &#39;+&#39;);

        // Construct the WhatsApp link with the country code and cleaned phone number
        let whatsappLink = `https://wa.me/${encodeURIComponent(countryCode.replace(&#39;+&#39;, &#39;&#39;))}${phoneNumber}`;
        
        // Append the message if provided
        if (message) {
            whatsappLink += `?text=${encodedMessage}`;
        }

        // Set the generated link to the input field
        document.getElementById(&#39;whatsappLink&#39;).value = whatsappLink;
    }

    function copyToClipboard() {
        const whatsappLink = document.getElementById(&#39;whatsappLink&#39;);
        whatsappLink.select();
        document.execCommand(&#39;copy&#39;);
        document.getElementById(&#39;copyFeedback&#39;).style.display = &#39;block&#39;;
        document.getElementById(&#39;copyFeedback&#39;).classList.add(&#39;fade-out&#39;);
        setTimeout(() =&gt; {
            document.getElementById(&#39;copyFeedback&#39;).style.display = &#39;none&#39;;
            document.getElementById(&#39;copyFeedback&#39;).classList.remove(&#39;fade-out&#39;);
        }, 2000);
    }
</script> 
</body>
</html>
